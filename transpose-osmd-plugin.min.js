!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("opensheetmusicdisplay")):"function"==typeof define&&define.amd?define(["opensheetmusicdisplay"],t):"object"==typeof exports?exports.opensheetmusicdisplay_plugin_transpose=t(require("opensheetmusicdisplay")):e.opensheetmusicdisplay_plugin_transpose=t(e.opensheetmusicdisplay)}(self,(function(e){return(()=>{"use strict";var t={265:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransposeCalculator=void 0;const o=n(118);class s{transposePitch(e,t,n){let r=o.NoteEnum.C,i=0,u=o.AccidentalEnum.NONE;const a=o.Pitch.CalculateTransposedHalfTone(e,n);let c=a.halftone,p=a.overflow;for(let t=0;t<s.noteEnums.length;t++){const n=s.noteEnums[t];if(n===c){const n=t;return r=s.noteEnums[n],i=e.Octave+p,u=o.AccidentalEnum.NONE,new o.Pitch(r,i,u)}if(n>c)break}for(let n=0;n<s.noteEnums.length;n++)if(s.noteEnums[n]>c){let a=n;const l=o.Pitch.HalfTonesFromAccidental(e.Accidental);for((l>0||0===l&&t.Key>=0)&&a--;a<0;)a+=7,c+=12,p--;for(;a>=7;)a-=7,c-=12,p++;r=s.noteEnums[a],u=o.Pitch.AccidentalFromHalfTones(c-r),i=e.Octave+p;break}return new o.Pitch(r,i,u)}transposeKey(e,t){let n=0,o=0;for(;n<s.keyMapping.length&&(o=s.keyMapping[n],o!==e.keyTypeOriginal);n++);let r=n+t;for(;r>=12;)r-=12;for(;r<0;)r+=12;e.Key=s.keyMapping[r],e.isTransposedBy=t}}t.TransposeCalculator=s,s.keyMapping=[0,-5,2,-3,4,-1,6,1,-4,3,-2,5],s.noteEnums=[o.NoteEnum.C,o.NoteEnum.D,o.NoteEnum.E,o.NoteEnum.F,o.NoteEnum.G,o.NoteEnum.A,o.NoteEnum.B]},742:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(265),t)},118:t=>{t.exports=e}},n={};return function e(o){if(n[o])return n[o].exports;var s=n[o]={exports:{}};return t[o].call(s.exports,s,s.exports,e),s.exports}(742)})()}));